<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <!--<title>Signin Template for Bootstrap</title>-->

    <!-- Bootstrap core CSS -->
    <link href="{{url_for('static',filename='styles/bootstrap-4.0.0/dist/css/bootstrap.min.css')}}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{{url_for('static',filename='styles/signin.css')}}" rel="stylesheet">
  </head>
    <body style="width:100%;background:url('static/inup.jpg');background-size: cover;">

  <body class="text-center" >
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>

  <script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyD_HuGwLAWRkG8hdgJ3ZZ1uP0PRtmp2mRI",
    authDomain: "inf551uscstudent.firebaseapp.com",
    databaseURL: "https://inf551uscstudent.firebaseio.com",
    projectId: "inf551uscstudent",
    storageBucket: "inf551uscstudent.appspot.com",
    messagingSenderId: "72153677100"
  };
  firebase.initializeApp(config);
  var database = firebase.database();
  var ref = firebase.database().ref();

  function writeUserData() {
  	var email = document.getElementById('inputEmail').value;
  	var password = document.getElementById('inputPassword').value;
    $.ajax({
      type : 'POST',
      url : "/login",
      contentType: 'application/json;charset=UTF-8',
      data: JSON.stringify({"email":email,"password":password}),
      complete: function(r){
           if (r.responseText!="0"){
            var user = email.substr(0, email.indexOf('@'));
            alert("You are signed in successfully as "+user);
            location.href="/search";
           }
           else{
            alert("Login failed!")
           }
      }
    });
}

 $(document).on('click', '#show', function() {
  //$('#password').get(0).type = 'text';

    if ($('#inputPassword').get(0).type == "password") {

          $('#inputPassword').get(0).type = 'text';
         
    } else {
        
            $('#inputPassword').get(0).type = 'password';
    }
  });
</script>
<div style ="position:fixed; top: 20%; left: 32%; width: 400px; height: 100px;">
<div class="box" style="opacity: 0.8; border: 1px solid black;filter: alpha(opacity=60);background-color: #ffffff;">
  

    <form class="form-signin">
      <a href="/"><img class="mb-4" src="/static/usc.png" alt="" width="72" height="72"></a>
      <h1 class="h3 mb-3 font-weight-normal">Please Sign In</h1>
      <label for="inputEmail" class="sr-only">Email address</label>
      <input type="text" name = "email" id="inputEmail" class="form-control"  placeholder="123@usc.edu" required autofocus>
      <label for="inputPassword" class="sr-only">Password</label>
      <input type="password" id="inputPassword" pattern=".{8,12}" required title="8 to 12 characters" class="form-control" placeholder="8 to 12 characters" required>
      <div class="checkbox mb-3">
        <label>
          <!--<input type="checkbox" value="remember-me"> Remember me-->
          <input type="checkbox" id='show'>Show Password
        </label>
      </div>
      <button class="btn btn-lg btn-primary btn-block" onclick="writeUserData()" type="submit">Sign In</button>
    </form>
</div>
</div>
  
  </body>
</body>

  </html>

</html>